 インタラクティブミュージックのための作曲支援ソフト開発

１.はじめに
　近年のゲーム作品では、インタラクティブミュージックという手法が多く用いられている。これはゲーム中の状況やプレイヤーの操作等によって音楽が動的に変化するという仕組みである。しかし、現代のゲーム音楽のインタラクティブミュージックはその仕様上作曲家に様々な制約やコストの上昇を余儀なくさせている。本来の楽曲一曲を作曲する場合と比較し、1.6倍程度のコストの増加が見られる。それは楽曲のアレンジの細かな小節数や時間による指定、または遷移のための細かなパーツの生成および構築が必要となるからだと言える。そのため、そのような細かなアレンジの作曲やアイディアのために、生成AIによる作曲支援が有効ではないかと考えた。
　音楽生成AIモデルの中で近年大きく話題になったものとして、Suno AIが挙げられる。これは歌唱機能を備えた音楽生成AIツールでありキーワードを入力することでそれにそって歌詞とともに声の入った楽曲の生成がされる。その手軽さからSNS上でも大きく話題なった。また、同様の生成AIモデルとしてOpenAI社がリリースしたJukeboxが挙げられる。こちらはアーティスト名とジャンル、歌詞、また曲のサンプル数を指定することで実際にそのアーティストを模倣した声の入った楽曲が生成される。
　このように多くのAIモデルは生成結果がサウンドとして出力されるため、手軽に使用できる一方でその出力結果に細かく手を加えたり、作品に転用することが容易ではない。本研究では生成結果としてMIDIファイルが望まれること、また小節数や楽想、さらにはアレンジ素となるメロディの入力が可能なことが望まれる。そのため、今回はOpenAI社の自然言語処理モデルであるChatGPT-3.5-Turboを用いる音楽生成を試みた。


2.インタラクティブミュージックについて
　ゲーム音楽にて使用されるインタラクティブミュージックの手法として大きく縦の遷移と横の遷移の二つに大別される。縦の遷移は複数のバリエーションやパーツのトラックを同一時間軸上に配置し進行させておくことで任意のタイミングで切り替えることによる遷移を可能とする。そのため、同状況下や条件下での変化によく使用される。例として戦闘場面にて緊迫感が増すように楽器を追加したり、キャラクターの移動速度の変化やオブジェクトとの距離の変化等によって遷移することができる。横の遷移では、時間的な進行を制御することで、あるタイミングでの楽曲のアレンジの変化や、楽曲の終了のためのコーダへの以降、もしくは楽曲のバリエーションのための楽章のミックスなどを行う。こちらは縦の遷移に対して遷移のための時間的制限が要求されるため、プリエンドと呼ばれる短いトラックを使用したり、音楽のタイミングとトリガーのタイミング、また映像のタイミングを調整するなど様々な工夫によって実現されている。
 そのため、すでに述べている通りインタラクティブミュージックを導入した場合、北谷によると導入しなかった単一の楽曲と比較して縦の遷移の場合1.6倍、横の遷移の場合約1.5倍のコストがそれぞれかかるという。実際に様々なインタラクティブミュージックが採用された「FINAL FANTASY VII RMAKE」ではメインコンポーザーの浜渦がインタラクティブミュージックのデータ数の多さや前後の辻褄を合わせるための制限などで、シームレスのシステムに苦戦したと答えている。
　


3.システム概説
　本システムはCycling 74社製 Max 8上にて動作する。Maxシリーズの特徴として、コンパイルすることなく自身のプログラミングを動かし、音声の再生が可能であることが挙げられる。そのため、今回はAIに生成させたMIDIファイルをすぐに再生できるのみでなく、それによってフィードバックが容易であること、またその他のサウンドファイルやMIDI、サウンドエフェクト等を自分で拡張することが可能である。この利点のため、今回採用するに至った。
　ChatGPT-3.5-TurboのAPI呼び出しをnode.jsにて行った。また、Max 8では標準のオブジェクトではMIDIファイル管理および表示が不得手であるため、Maxライブラリである「bach」を使用した。
　ChatGPTはあくまで自然言語処理モデルであるため、MIDIファイルや音声情報の入出力に対応していない。そのため、今回はテキストベースの記譜法であるABC記譜法を使用した。ABC記譜法では単純なテキストの形式にて譜面の表現が可能であり、主にアルファベットにて音高とコード、数字にて音価を記譜する。また、キーや拍子等の記述も可能であり、基本的なリードシート程度の記譜は問題なく行える。
　ABC記譜法とMIDIファイルの変換器をMax 8にて実装し、ユーザー側は普段見慣れている五線譜での記譜もしくはMIDIファイルでのやりとりが可能なようにした。
　


4.生成結果の評価



4.2考察



5.まとめ


